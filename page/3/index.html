<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>前端小菜鸡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="前端小菜鸡">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="前端小菜鸡">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前端小菜鸡">
  
    <link rel="alternate" href="/atom.xml" title="前端小菜鸡" type="application/atom+xml">
  
  
    <link rel="icon" href="/images/default-avatar.jpeg">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/highlight.css">
</head>
</html>
<body>
  <div id="fullpage" class="mobile-nav-right">
    
      <div id="wrapper" title="图片来自网络">
    
    
      <header id="header">
  <div id="nav-toggle" class="nav-toggle"></div>
  <div class="head-box global-width">
    <nav class="nav-box nav-right">
      
        <a class="nav-item" href="/" title>首页</a>
      
        <a class="nav-item" href="/archives" title>归档</a>
      
    </nav>
  </div>
</header>
      <div id="middlecontent" title class="global-width sidebar-right">
        <section id="main">
  
    <article id="post-关于http的文章" class="article global-container article-type-post" itemscope itemprop="blogPost">
  
    <header class="article-header">
      
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/05/26/关于http的文章/">http协议</a>
    </h1>
  

    </header>
  
  <div class="article-meta">
    <a href="/2019/05/26/关于http的文章/" class="article-date">
  <time datetime="2019-05-26T01:46:19.000Z" itemprop="datePublished">2019-05-26</time>
</a>
    
    
  </div>
  

  <div class="article-inner">
    
    <div class="article-content article-content-doorframe" itemprop="articleBody">
      
        <h1 id="HTTP和表单"><a href="#HTTP和表单" class="headerlink" title="HTTP和表单"></a>HTTP和表单</h1><blockquote>
<p>通信本质上必须是无状态的，以便从客户端到服务器的每个请求必须包含理解请求所需的所有信息，并且不能利用服务器上任何存储的上下文。</p>
<p>Roy Fielding，建筑风格和基于网络的软件架构设计</p>
</blockquote>
<p><img src="http://eloquentjavascript.net/img/chapter_picture_18.jpg" alt="一张网形式的图片在中世纪纸卷的"></p>
<p><a href="http://eloquentjavascript.net/13_browser.html#web" target="_blank" rel="noopener">第13章中</a>已经提到的<em>超文本传输协议</em>是在万维网上请求和提供数据的机制。本章更详细地描述了协议，并解释了浏览器JavaScript访问它的方式。</p>
<h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><p>如果您在浏览器的地址栏中键入<em>eloquentjavascript.net/18_http.html</em>，浏览器首先会查找与<em>eloquentjavascript.net</em>关联的服务器的地址，并尝试在端口80上打开与其建立的TCP连接，这是HTTP流量的默认端口。如果服务器存在并接受连接，浏览器可能会发送如下内容：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">GET /<span class="number">18</span>_http.html HTTP / <span class="number">1.1</span></span><br><span class="line">主持人：eloquentjavascript.net</span><br><span class="line">User-Agent：您的浏览器名称</span><br></pre></td></tr></table></figure></div>
<p>然后服务器通过相同的连接进行响应。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HTTP / <span class="number">1.1</span> <span class="number">200</span>好的</span><br><span class="line">内容长度：<span class="number">65585</span></span><br><span class="line">内容类型：text / html</span><br><span class="line">最后修改时间：周一，<span class="number">2018</span>年<span class="number">1</span>月<span class="number">8</span>日，格林威治标准时间<span class="number">10</span>:<span class="number">29</span>:<span class="number">45</span></span><br><span class="line"></span><br><span class="line">&lt;！doctype html&gt;</span><br><span class="line">......文件的其余部分</span><br></pre></td></tr></table></figure></div>
<p>浏览器在空行，其<em>正文</em>（不要与HTML <code>&lt;body&gt;</code>标记混淆）之后获取响应的一部分，并将其显示为HTML文档。</p>
<p>客户端发送的信息称为<em>请求</em>。它从这一行开始：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /<span class="number">18</span>_http.html HTTP / <span class="number">1.1</span></span><br></pre></td></tr></table></figure></div>
<p>第一个词是请求的<em>方法</em>。<code>GET</code>意味着我们想要<em>获取</em>指定的资源。其他常用方法是<code>DELETE</code>删除资源，<code>PUT</code>创建或替换资源，以及<code>POST</code>向其发送信息。请注意，服务器没有义务执行它获得的每个请求。如果你走到一个随机的网站并告诉它的<code>DELETE</code>主页，它可能会拒绝。</p>
<p>方法名称后面的部分是请求适用的<em>资源</em>的路径。在最简单的情况下，资源只是服务器上的文件，但协议并不要求它。资源可以是任何可以<em>像</em>文件<em>一样</em>传输的资源。许多服务器生成它们即时生成的响应。例如，如果您打开[<em><a href="https://github.com/marijnh" target="_blank" rel="noopener">https://github.com/marijnh</a></em></p>
<p>在资源路径之后，请求的第一行提到<code>HTTP/1.1</code>指示它正在使用的HTTP协议的版本。</p>
<p>在实践中，许多站点使用HTTP版本2，它支持与版本1.1相同的概念，但是更复杂，因此它可以更快。浏览器在与给定服务器通信时将自动切换到适当的协议版本，无论使用哪个版本，请求的结果都是相同的。因为版本1.1更简单，更容易使用，我们将专注于此。</p>
<p>服务器的响应也将以版本开始，然后是响应的状态，首先是三位数的状态代码，然后是人类可读的字符串。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP / <span class="number">1.1</span> <span class="number">200</span>好的</span><br></pre></td></tr></table></figure></div>
<p>以2开头的状态代码表示请求成功。以4开头的代码表示请求有问题。404可能是最着名的HTTP状态代码 - 这意味着无法找到资源。以5开头的代码表示服务器上发生了错误，请求不应该受到指责。</p>
<p>请求或响应的第一行可以跟随任意数量的<em>标头</em>。这些是表单中的行，<code>name: value</code>用于指定有关请求或响应的额外信息。这些标头是示例响应的一部分：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">内容长度：<span class="number">65585</span></span><br><span class="line">内容类型：text / html</span><br><span class="line">最后修改时间：周四，<span class="number">2018</span>年<span class="number">1</span>月<span class="number">4</span>日<span class="number">14</span>:<span class="number">05</span>:<span class="number">30</span> GMT</span><br></pre></td></tr></table></figure></div>
<p>这告诉我们响应文档的大小和类型。在这种情况下，它是一个65,585字节的HTML文档。它还告诉我们上次修改该文档的时间。</p>
<p>对于大多数标头，客户端和服务器可以自由决定是否将它们包含在请求或响应中。但有一些是必需的。例如，<code>Host</code>指定主机名的标头应包含在请求中，因为服务器可能在单个IP地址上提供多个主机名，如果没有该标头，服务器将不知道客户端尝试通话的主机名至。</p>
<p>在标题之后，请求和响应都可能包含一个空行，后跟一个正文，其中包含正在发送的数据。<code>GET</code>并<code>DELETE</code>请求不一起发送任何数据，但<code>PUT</code>并<code>POST</code>要求做。同样，某些响应类型（如错误响应）不需要正文。</p>
<h2 id="浏览器和HTTP"><a href="#浏览器和HTTP" class="headerlink" title="浏览器和HTTP"></a>浏览器和HTTP</h2><p>正如我们在示例中看到的，当我们在其地址栏中输入URL时，浏览器将发出请求。当生成的HTML页面引用其他文件（例如图像和JavaScript文件）时，也会检索这些文件。</p>
<p>一个中等复杂的网站可以轻松地包含10到200个资源。为了能够快速获取这些<code>GET</code>请求，浏览器将同时发出多个请求，而不是一次等待一个响应。</p>
<p>HTML页面可以包括<em>表单</em>，允许用户填写信息并将其发送到服务器。这是一个表单的示例：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">单击编辑并运行代码<span class="tag">&lt; 形式 方法 = <span class="string">“GET”</span>  行动 = <span class="string">“示例/</span> <span class="attr">message.html</span>” &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">p</span> &gt;</span>名称：<span class="tag">&lt; 输入 类型 = <span class="string">“文本”</span>  名称 = <span class="string">“名”</span> &gt;</span> <span class="tag">&lt;/ <span class="attr">p</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">p</span> &gt;</span>消息：<span class="tag">&lt; <span class="attr">BR</span> &gt;</span> <span class="tag">&lt; <span class="attr">textarea</span>的 名 = <span class="string">“message”</span> &gt;</span> <span class="tag">&lt;/ <span class="attr">textarea</span> &gt;</span> <span class="tag">&lt;/ <span class="attr">p</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">p</span> &gt;</span> <span class="tag">&lt;<span class="name">button</span>  <span class="attr">type</span> = <span class="string">“submit”</span> &gt;</span>发送<span class="tag">&lt;/ <span class="attr">button</span> &gt;</span> <span class="tag">&lt;/ <span class="attr">p</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt;/ <span class="attr">form</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p>此代码描述了一个包含两个字段的表单：一个要求输入名称的小表单和一个用于写入消息的较大字段。当您单击“发送”按钮时，表单将被<em>提交</em>，这意味着其字段的内容将打包到HTTP中请求和浏览器导航到该请求的结果。</p>
<p>当<code>&lt;form&gt;</code>元素的<code>method</code>属性为<code>GET</code>（或被省略）时，表单中的信息将<code>action</code>作为<em>查询字符串</em>添加到URL的<em>末尾</em>。浏览器可能会向此URL发出请求：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /example/message.html?name=Jean&amp;message=Yes%<span class="number">3</span>F HTTP / <span class="number">1.1</span></span><br></pre></td></tr></table></figure></div>
<p>问号表示URL的路径部分的结束和查询的开始。接下来是成对的名称和值，分别对应于<code>name</code>表单字段元素的属性和这些元素的内容。＆符号（<code>&amp;</code>）用于分隔对。</p>
<p>URL中编码的实际消息是“是？”，但问号被奇怪的代码替换。必须转义查询字符串中的某些字符。问号，表示为<code>%3F</code>，其中之一。似乎有一条不成文的规则，即每种格式都需要以自己的方式转义字符。这一个称为<em>URL编码</em>，使用百分号后跟两个十六进制（基数为16）的数字来编码字符代码。在这种情况下，3F（十进制表示法为63）是问号字符的代码。JavaScript提供了编码和解码此格式的函数<code>encodeURIComponent</code>和<code>decodeURIComponent</code>函数。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">控制台。log（encodeURIComponent（“Yes？”））;</span><br><span class="line">//→是％3F </span><br><span class="line">控制台。log（decodeURIComponent（“Yes％3F”））;</span><br><span class="line">//→是吗？</span><br></pre></td></tr></table></figure></div>
<p>如果我们<code>method</code>在之前看到的示例中更改HTML表单的属性，则<code>POST</code>提交表单的HTTP请求将使用该<code>POST</code>方法并将查询字符串放在请求的正文中，而不是将其添加到URL中。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POST /example/message.html HTTP / <span class="number">1.1</span></span><br><span class="line">内容长度：<span class="number">24</span></span><br><span class="line">内容类型：application / x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">名称=吉恩＆消息=是％<span class="number">3</span>F</span><br></pre></td></tr></table></figure></div>
<p><code>GET</code>请求应该用于没有副作用但只是要求提供信息的请求。在服务器上更改某些内容的请求（例如，创建新帐户或发布消息）应使用其他方法表达，例如<code>POST</code>。客户端软件（如浏览器）知道它不应盲目地发出<code>POST</code>请求，但通常会隐式发出<code>GET</code>请求 - 例如预取一个它认为用户很快就会需要的资源。</p>
<p>我们将<a href="http://eloquentjavascript.net/18_http.html#forms" target="_blank" rel="noopener">在本章</a>后面回到表单以及如何使用JavaScript与它们进行交互。</p>
<p>调用浏览器JavaScript可以发出HTTP请求的接口<code>fetch</code>。由于它相对较新，它可以方便地使用promises（浏览器界面很少见）。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fetch（“example / data.txt”）。然后（响应 =&gt; &#123;</span><br><span class="line">   控制台。日志（响应。状态）;</span><br><span class="line">   <span class="comment">//→200 </span></span><br><span class="line">  控制台。日志（响应。头。得到（“内容类型”））;</span><br><span class="line">   <span class="comment">//→纯文本/ </span></span><br><span class="line">&#125;）;</span><br></pre></td></tr></table></figure></div>
<p>调用<code>fetch</code>返回一个promise，该promise解析为一个<code>Response</code>包含服务器响应信息的对象，例如其状态代码和标题。标头包含在一个类似<code>Map</code>的对象中，该对象将其键（标题名称）视为不区分大小写，因为标题名称不应区分大小写。这意味着，和将返回相同的值。<code>headers.get(&quot;Content-Type&quot;)`</code>headers.get(“content-TYPE”)`</p>
<p>请注意，<code>fetch</code>即使服务器使用错误代码响应，解析也会成功解析。它<em>可能</em>还可以，如果有网络错误或拒绝对是否无法找到该请求是针对服务器。</p>
<p>第一个参数<code>fetch</code>是应该请求的URL。当该URL不以协议名称（例如<em>http :)</em>开头时，它被视为<em>相对</em>，这意味着它相对于当前文档被解释。当它以斜杠（/）开头时，它将替换当前路径，即服务器名称后面的部分。如果没有，则当前路径的一部分（包括其最后一个斜杠字符）将放在相对URL的前面。</p>
<p>要获取响应的实际内容，可以使用其<code>text</code>方法。因为一旦收到响应的头文件就解决了初始承诺，并且因为读取响应主体可能需要一段时间，这又会返回一个承诺。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fetch（“example / data.txt”）</span><br><span class="line">  。然后（RESP  =&gt;  RESP。文本（））</span><br><span class="line">  。然后（文本 =&gt;  控制台。日志（文本））;</span><br><span class="line"><span class="comment">//→这是data.txt的内容</span></span><br></pre></td></tr></table></figure></div>
<p>一个名为的类似方法<code>json</code>返回一个promise，它解析为在将主体解析为JSON时获得的值，如果它不是有效的JSON，则返回拒绝。</p>
<p>默认情况下，<code>fetch</code>使用该<code>GET</code>方法发出请求，但不包含请求正文。您可以通过将带有额外选项的对象作为第二个参数传递来以不同方式配置它。例如，此请求尝试删除<code>example/data.txt</code>：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fetch（“example / data.txt”，&#123; method：“DELETE” &#125;）。然后（RESP  =&gt; &#123;</span><br><span class="line">   控制台。登录（RESP。状态）;</span><br><span class="line">   //→405 </span><br><span class="line">&#125;）;</span><br></pre></td></tr></table></figure></div>
<p>405状态代码表示“方法不允许”，HTTP服务器的方式是“我不能这样做”。</p>
<p>要添加请求正文，您可以包含一个<code>body</code>选项。要设置标题，<code>headers</code>可以选择。例如，此请求包含一个<code>Range</code>标头，指示服务器仅返回响应的一部分。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fetch（“example / data.txt”，&#123; headers：&#123; Range：“bytes = <span class="number">8</span><span class="number">-19</span>” &#125;&#125;）</span><br><span class="line">  。然后（RESP  =&gt;  RESP。文本（））</span><br><span class="line">  。然后（控制台。日志）;</span><br><span class="line"><span class="comment">//→内容</span></span><br></pre></td></tr></table></figure></div>
<p>浏览器将自动添加一些请求标头，例如“主机”和服务器所需的标头，以确定主体的大小。但添加自己的标头通常可用于包含诸如身份验证信息之类的内容，或告诉服务器您希望接收哪种文件格式。</p>
<h2 id="HTTP沙盒"><a href="#HTTP沙盒" class="headerlink" title="HTTP沙盒"></a>HTTP沙盒</h2><p>在网页脚本中再次发出HTTP请求会引起对安全性的担忧。控制脚本的人可能与其运行的计算机上的人没有相同的兴趣。更具体地说，如果我访问<em>themafia.org</em>，我不希望它的脚本能够使用我的浏览器中的识别信息向<em>mybank.com</em>提出请求，并指示将我所有的钱转移到一些随机帐户。</p>
<p>出于这个原因，浏览器通过禁止脚本向其他域（例如<em>themafia.org</em>和<em>mybank.com</em>等名称）发出HTTP请求来保护我们。</p>
<p>当构建想要出于合法原因访问多个域的系统时，这可能是一个恼人的问题。幸运的是，服务器可以在响应中包含这样的标头，以明确向浏览器指示请求来自另一个域是可以的：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin：*</span><br></pre></td></tr></table></figure></div>
<h2 id="欣赏HTTP"><a href="#欣赏HTTP" class="headerlink" title="欣赏HTTP"></a>欣赏HTTP</h2><p>在构建需要在浏览器（客户端）中运行的JavaScript程序与服务器（服务器端）上的程序之间进行通信的系统时，有几种不同的方法可以对此通信进行建模。</p>
<p>常用的模型是<em>远程过程调用</em>。在此模型中，通信遵循正常函数调用的模式，但该函数实际上在另一台机器上运行。调用它涉及向服务器发出包含函数名称和参数的请求。对该请求的响应包含返回的值。</p>
<p>在考虑远程过程调用时，HTTP只是一种通信工具，您很可能会编写一个完全隐藏它的抽象层。</p>
<p>另一种方法是围绕资源和HTTP方法的概念构建您的通信。而不是调用的远程过程<code>addUser</code>，您使用<code>PUT</code>请求<code>/users/larry</code>。您可以定义代表用户的JSON文档格式（或使用现有格式），而不是在函数参数中对该用户的属性进行编码。然后<code>PUT</code>，创建新资源的请求的主体就是这样的文档。通过<code>GET</code>向资源的URL 发出请求来获取资源（例如，<code>/user/larry</code>），该URL 再次返回表示资源的文档。</p>
<p>第二种方法可以更轻松地使用HTTP提供的一些功能，例如支持缓存资源（在客户端上保留副本以便快速访问）。HTTP中使用的概念设计得很好，可以为设计服务器接口提供一组有用的原则。</p>
<h2 id="安全性和HTTPS"><a href="#安全性和HTTPS" class="headerlink" title="安全性和HTTPS"></a>安全性和HTTPS</h2><p>通过互联网传播的数据往往会走一条漫长而危险的道路。要到达目的地，必须经历从咖啡店Wi-Fi热点到各种公司和州控制的网络的任何事情。在其路线的任何一点，都可以进行检查甚至修改。</p>
<p>如果重要的是保密信息，例如电子邮件帐户的密码，或未经修改的到达目的地，例如您通过银行网站转帐的帐号，那么普通的HTTP就不够好了。</p>
<p>用于以<em>https：//</em>开头的URL的安全HTTP协议以一种使其难以阅读和篡改的方式包装HTTP流量。在交换数据之前，客户端通过要求其证明其具有由浏览器识别的证书颁发机构颁发的加密证书来验证服务器是否是其声称的人。接下来，通过连接的所有数据都以一种防止窃听和篡改的方式加密。</p>
<p>因此，当它正常工作时，HTTPS会阻止其他人冒充您尝试与之交谈的网站，也不会窥探您的通信。它不是完美的，也有过在那里HTTPS失败，因为伪造或被盗的证书和破软件的各种事件，但它是一个<em>很多</em>比普通HTTP安全。</p>
<h2 id="表格字段"><a href="#表格字段" class="headerlink" title="表格字段"></a>表格字段</h2><p>表单最初是为JavaScript之前的Web设计的，允许网站在HTTP请求中发送用户提交的信息。此设计假定通过导航到新页面始终与服务器进行交互。</p>
<p>但是它们的元素是DOM的一部分，就像页面的其余部分一样，表示表单字段的DOM元素支持许多其他元素上不存在的属性和事件。这使得可以使用JavaScript程序检查和控制此类输入字段，并执行诸如向表单添加新功能或使用表单和字段作为JavaScript应用程序中的构建块等操作。</p>
<p>Web表单由<code>&lt;form&gt;</code>标记中分组的任意数量的输入字段组成。HTML允许几种不同风格的字段，从简单的开/关复选框到下拉菜单和文本输入字段。本书不会尝试全面讨论所有字段类型，但我们将从粗略概述开始。</p>
<p>很多字段类型都使用<code>&lt;input&gt;</code>标记。此标记的<code>type</code>属性用于选择字段的样式。这些是一些常用的<code>&lt;input&gt;</code>类型：</p>
<table>
<thead>
<tr>
<th><code>text</code></th>
<th>单行文本字段</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>password</code></td>
<td>与<code>text</code>隐藏输入的文本相同但隐藏</td>
</tr>
<tr>
<td><code>checkbox</code></td>
<td>一个开/关开关</td>
</tr>
<tr>
<td><code>radio</code></td>
<td>（部分）多选字段</td>
</tr>
<tr>
<td><code>file</code></td>
<td>允许用户从其计算机中选择文件</td>
</tr>
</tbody>
</table>
<p>表单字段不一定必须出现在<code>&lt;form&gt;</code>标记中。您可以将它们放在页面中的任何位置。这样的无形式字段无法提交（只有整个表单可以提交），但是当使用JavaScript响应输入时，我们通常不希望正常提交字段。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">p</span> &gt;</span> <span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“text”</span>  <span class="attr">value</span> = <span class="string">“abc”</span> &gt;</span>（text）<span class="tag">&lt;/ <span class="attr">p</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">p</span> &gt;</span> <span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“password”</span>  <span class="attr">value</span> = <span class="string">“abc”</span> &gt;</span>（密码）<span class="tag">&lt;/ <span class="attr">p</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">p</span> &gt;</span> <span class="tag">&lt; 输入 类型 = <span class="string">“复选框”</span>  选中&gt;</span>（复选框）<span class="tag">&lt;/ <span class="attr">p</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">p</span> &gt;</span> <span class="tag">&lt;<span class="name">输入</span> 类型 =<span class="string">“radio”</span>  <span class="attr">value</span> = <span class="string">“A”</span>  <span class="attr">name</span> = <span class="string">“choice”</span> &gt;</span> </span><br><span class="line">   <span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“radio”</span>  <span class="attr">value</span> = <span class="string">“B”</span>  <span class="attr">name</span> = <span class="string">“choice”</span>  <span class="attr">checked</span> &gt;</span> </span><br><span class="line">   <span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“radio”</span>  <span class="attr">value</span> = <span class="string">“C”</span>  <span class="attr">name</span> = <span class="string">“choice”</span> &gt;</span>（radio）<span class="tag">&lt;/ <span class="attr">p</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">p</span> &gt;</span> <span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“file”</span> &gt;</span>（file）<span class="tag">&lt;/ <span class="attr">p</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p>这些元素的JavaScript接口因元素的类型而异。</p>
<p>多行文本字段有自己的标记，<code>&lt;textarea&gt;</code>主要是因为使用属性指定多行起始值会很尴尬。的<code>&lt;textarea&gt;</code>标签需要一个匹配结束标记，并使用这两个之间的文本，而不是属性，作为起始文本。<code>&lt;/textarea&gt;`</code>value`</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt; textarea &gt;</span><br><span class="line">一</span><br><span class="line">二</span><br><span class="line">三</span><br><span class="line">&lt;/ textarea &gt;</span><br></pre></td></tr></table></figure></div>
<p>最后，<code>&lt;select&gt;</code>标记用于创建允许用户从多个预定义选项中进行选择的字段。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">select</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">option</span> &gt;</span> Pancakes <span class="tag">&lt;/ <span class="attr">option</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">option</span> &gt;</span> Pudding <span class="tag">&lt;/ <span class="attr">option</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">option</span> &gt;</span> Ice cream <span class="tag">&lt;/ <span class="attr">option</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt;/ <span class="attr">select</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p>只要表单字段的值发生更改，它就会触发<code>&quot;change&quot;</code>事件。</p>
<h2 id="焦点"><a href="#焦点" class="headerlink" title="焦点"></a>焦点</h2><p>与HTML文档中的大多数元素不同，表单字段可以获得<em>键盘焦点</em>。当以其他方式单击或激活时，它们将成为当前活动元素和键盘输入的接收者。</p>
<p>因此，只有在聚焦时才能键入文本字段。其他字段对键盘事件的响应不同。例如，<code>&lt;select&gt;</code>菜单尝试移动到包含用户键入的文本的选项，并通过上下移动其选择来响应箭头键。</p>
<p>我们可以使用<code>focus</code>和<code>blur</code>方法控制JavaScript的焦点。第一个将焦点移动到调用它的DOM元素，第二个移动焦点。值in 对应于当前关注的元素。<code>document.activeElement</code></p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“text”</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span><br><span class="line">  文档。querySelector（“input”）。focus（）;</span><br><span class="line">  控制台。日志（文件。activeElement。的tagName）;</span><br><span class="line">  //→输入</span><br><span class="line">  文档。querySelector（“input”）。blur（）;</span><br><span class="line">  控制台。日志（文件。activeElement。的tagName）;</span><br><span class="line">  //→BODY </span><br><span class="line"><span class="tag">&lt;/<span class="name">脚本</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<p>对于某些页面，用户需要立即与表单字段进行交互。加载文档时，JavaScript可用于聚焦此字段，但HTML也提供了<code>autofocus</code>属性，这会产生相同的效果，同时让浏览器知道我们要实现的目标。这使浏览器可以选择在不合适时禁用行为，例如当用户将焦点放在其他内容上时。</p>
<p>传统上，浏览器还允许用户通过按Tab键将焦点移动到文档中。我们可以通过<code>tabindex</code>属性影响元素获得焦点的顺序。以下示例文档将让焦点从文本输入跳转到OK按钮，而不是首先通过帮助链接：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“text”</span>  <span class="attr">tabindex</span> = <span class="string">1</span> &gt;</span>  <span class="tag">&lt; <span class="attr">a</span>  <span class="attr">href</span> = <span class="string">“。”</span> &gt;</span>（帮助）<span class="tag">&lt;/ <span class="attr">a</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">button</span>  <span class="attr">onclick</span> = <span class="string">“console.log（</span>'<span class="attr">ok</span>'）”  <span class="attr">tabindex</span> = <span class="string">2</span> &gt;</span>确定<span class="tag">&lt;/ <span class="attr">button</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p>默认情况下，无法聚焦大多数类型的HTML元素。但是您可以<code>tabindex</code>向任何可以使其聚焦的元素添加属性。A <code>tabindex</code>的-1使得tabbing跳过一个元素，即使它通常是可聚焦的。</p>
<h2 id="禁用的字段"><a href="#禁用的字段" class="headerlink" title="禁用的字段"></a>禁用的字段</h2><p>可以通过其属性<em>禁用</em>所有表单域<code>disabled</code>。它是一个可以在没有值的情况下指定的属性 - 它存在的事实会禁用该元素。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt; 按钮&gt;我没事。&lt;/ button &gt; </span><br><span class="line">&lt; 按钮已 禁用&gt;我出局&lt;/ button &gt;</span><br></pre></td></tr></table></figure></div>
<p>禁用的字段无法聚焦或更改，浏览器使它们看起来灰色和褪色。</p>
<p>当程序正在处理由某些按钮或其他可能需要与服务器通信的控件引起的操作并因此需要一段时间时，在操作完成之前禁用控件是个好主意。这样，当用户不耐烦并再次点击它时，他们不会意外地重复他们的动作。</p>
<h2 id="形式整体"><a href="#形式整体" class="headerlink" title="形式整体"></a>形式整体</h2><p>当字段包含在<code>&lt;form&gt;</code>元素中时，其DOM元素将具有<code>form</code>链接回表单的DOM元素的属性。<code>&lt;form&gt;</code>反过来，该元素有一个名为的属性<code>elements</code>，其中包含一个类似于数组的字段集合。</p>
<p><code>name</code>表单字段的属性确定在提交表单时标识其值的方式。它还可以在访问表单的<code>elements</code>属性时用作属性名称，该属性既可以作为类似数组的对象（可通过数字访问），也可以作为地图（可通过名称访问）。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; 形式 行动 = <span class="string">“示例/</span> <span class="attr">submit.html</span>” &gt;</span> </span><br><span class="line">  名称：<span class="tag">&lt; 输入 类型 = <span class="string">“文本”</span>  名称 = <span class="string">“名”</span> &gt;</span> <span class="tag">&lt; <span class="attr">BR</span> &gt;</span> </span><br><span class="line">  密码：<span class="tag">&lt; 输入 类型 = <span class="string">“密码”</span>  名称 = <span class="string">“密码”</span> &gt;</span> <span class="tag">&lt; <span class="attr">BR</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; 按钮 <span class="attr">type</span> = <span class="string">“submit”</span> &gt;</span>登录<span class="tag">&lt;/ <span class="attr">button</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt;/ <span class="attr">form</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">script</span> &gt;</span></span><br><span class="line">  让 form  = 文件。querySelector（“form”）;</span><br><span class="line">  控制台。日志（形式。元素 [ 1 ]。式）;</span><br><span class="line">  //→密码</span><br><span class="line">  控制台。日志（形式。元素。密码。类型）;</span><br><span class="line">  //→密码</span><br><span class="line">  控制台。日志（形式。元素。名。形成 ==  形式）;</span><br><span class="line">  //→true </span><br><span class="line"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p>按下<code>type</code>属性为<code>submit</code>will的按钮会导致提交表单。在聚焦表单域时按Enter键具有相同的效果。</p>
<p>提交表单通常意味着浏览器<code>action</code>使用a <code>GET</code>或<code>POST</code>请求导航到表单属性指示的页面。但在此之前，<code>&quot;submit&quot;</code>事件就会被触发。您可以使用JavaScript处理此事件，并通过调用<code>preventDefault</code>事件对象来阻止此默认行为。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">form</span>  <span class="attr">action</span> = <span class="string">“example</span> / <span class="attr">submit.html</span>” &gt;</span> </span><br><span class="line">  值：<span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“text”</span>  <span class="attr">name</span> = <span class="string">“value”</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">button</span>  <span class="attr">type</span> = <span class="string">“submit”</span> &gt;</span>保存<span class="tag">&lt;/ <span class="attr">button</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt;/ <span class="attr">form</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span><br><span class="line">  let  form  =  文件。querySelector（“form”）;</span><br><span class="line">  形式。addEventListener（“submit”， &#123;</span><br><span class="line">     console。log（“保存值”，表单。元素。值。值）;</span><br><span class="line">    事件。preventDefault（）;</span><br><span class="line">  &#125;）;</span><br><span class="line"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p><code>&quot;submit&quot;</code>JavaScript中的拦截事件有各种用途。我们可以编写代码来验证用户输入的值是否有意义并立即显示错误消息而不是提交表单。或者我们可以完全禁用常规提交表单的方式，如示例所示，并让我们的程序处理输入，可能使用<code>fetch</code>将其发送到服务器而无需重新加载页面。</p>
<h2 id="文本字段"><a href="#文本字段" class="headerlink" title="文本字段"></a>文本字段</h2><p>由<code>&lt;textarea&gt;</code>标签或<code>&lt;input&gt;</code>类型为<code>text</code>或的标签创建的字段<code>password</code>共享一个公共接口。它们的DOM元素具有<code>value</code>将其当前内容保存为字符串值的属性。将此属性设置为另一个字符串会更改字段的内容。</p>
<p>在<code>selectionStart</code>与<code>selectionEnd</code>文本字段的性能给我们介绍一下光标和选择的文本信息。如果未选择任何内容，则这两个属性保持相同的数字，表示光标的位置。例如，0表示文本的开头，10表示光标在第10 个字符之后。选择部分字段时，两个属性将不同，从而为我们提供所选文本的开头和结尾。就像<code>value</code>，这些属性也可以写入。</p>
<p>想象一下，你正在写一篇关于Khasekhemwy的文章，但在拼写他的名字时遇到一些麻烦。以下代码<code>&lt;textarea&gt;</code>使用事件处理程序连接标记，当您按F2时，为您插入字符串“Khasekhemwy”。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">textarea</span> &gt;</span> <span class="tag">&lt;/ <span class="attr">textarea</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span><br><span class="line">  let  textarea  =  document。querySelector（“textarea”）;</span><br><span class="line">  textarea。的addEventListener（“的keydown” ，事件 =&gt; &#123;</span><br><span class="line">     //用于F2的键控代码恰好是113 </span><br><span class="line">    ，如果（事件。键代码 ==  113）&#123;</span><br><span class="line">       replaceSelection（textarea的，“卡塞凯姆威”）;</span><br><span class="line">       事件。的preventDefault（）;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;）;</span><br><span class="line">  function  replaceSelection（field，word）&#123;</span><br><span class="line">     let  from  =  field。selectionStart，to  =  field。selectionEnd ;</span><br><span class="line">    场。value  =  field。价值。slice（0，from）+  word  + </span><br><span class="line">                  field。价值。切片（to）;</span><br><span class="line">    //将光标放在单词</span><br><span class="line">    字段后面。selectionStart  =  from  +  word。长度 ;</span><br><span class="line">    场。selectionEnd  =  from  +  word。长度 ;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p>该<code>replaceSelection</code>函数用给定的单词替换文本字段内容的当前选定部分，然后将光标移动到该单词之后，以便用户可以继续键入。</p>
<p><code>&quot;change&quot;</code>每次键入内容时，都不会触发文本字段的事件。相反，它会在内容发生变化后失去焦点时触发。要立即响应文本字段中的更改，您应该为<code>&quot;input&quot;</code>事件注册一个处理程序，该处理程序会在用户每次键入字符，删除文本或以其他方式操作字段内容时触发。</p>
<p>以下示例显示了一个文本字段和一个计数器，显示字段中文本的当前长度：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“text”</span> &gt;</span> length：<span class="tag">&lt; <span class="attr">span</span>  <span class="attr">id</span> = <span class="string">“length”</span> &gt;</span> 0 <span class="tag">&lt;/ <span class="attr">span</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span><br><span class="line">  let  text  =  document。querySelector（“input”）;</span><br><span class="line">  让 output  =  document。querySelector（“＃length”）;</span><br><span class="line">  文字。addEventListener（“input”，（）=&gt; &#123;</span><br><span class="line">     output。 =  文字。价值。长度 ;</span><br><span class="line">  &#125;）;</span><br><span class="line"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<h2 id="复选框和单选按钮"><a href="#复选框和单选按钮" class="headerlink" title="复选框和单选按钮"></a>复选框和单选按钮</h2><p>复选框字段是二进制切换。可以通过其<code>checked</code>属性提取或更改其值，该属性包含布尔值。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">label</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“checkbox”</span>  <span class="attr">id</span> = <span class="string">“purple”</span> &gt;</span>将此页面设为紫色</span><br><span class="line"> <span class="tag">&lt;/ <span class="attr">label</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span><br><span class="line">  let  checkbox  =  document。querySelector（“#purple”）;</span><br><span class="line">  复选框。的addEventListener（“改变”，（）=&gt; &#123;</span><br><span class="line">     文档。体。风格。背景 = </span><br><span class="line">      复选框。检查 ？ “mediumpurple”：“” ;</span><br><span class="line">  &#125;）;</span><br><span class="line"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p>所述<code>&lt;label&gt;</code>标签与相关联的输入域一块文档。单击标签上的任意位置将激活该字段，该字段将其聚焦并在复选框或单选按钮时切换其值。</p>
<p>单选按钮类似于复选框，但它隐式链接到具有相同<code>name</code>属性的其他单选按钮，以便其中只有一个可以随时处于活动状态。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">颜色：</span><br><span class="line"> <span class="tag">&lt; <span class="attr">label</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“radio”</span>  <span class="attr">name</span> = <span class="string">“color”</span>  <span class="attr">value</span> = <span class="string">“orange”</span> &gt;</span>橙色</span><br><span class="line"> <span class="tag">&lt;/ <span class="attr">label</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">label</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“radio”</span>  <span class="attr">name</span> = <span class="string">“color”</span>  <span class="attr">value</span> = <span class="string">“lightgreen”</span> &gt;</span>绿色</span><br><span class="line"> <span class="tag">&lt;/ <span class="attr">label</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">label</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“radio”</span> <span class="attr">name</span> = <span class="string">“color”</span>  值= <span class="string">“lightblue”</span> &gt;</span>蓝色</span><br><span class="line"> <span class="tag">&lt;/ <span class="attr">label</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span><br><span class="line">  let  buttons  =  document。querySelectorAll（“[name = color]”）;</span><br><span class="line">  对于（让 按钮 的 阵列。从（按钮））&#123;</span><br><span class="line">     按钮。的addEventListener（“改变”，（）=&gt; &#123;</span><br><span class="line">       文档。体。风格。背景 =  按钮。价值 ;</span><br><span class="line">    &#125;）;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p>给出的CSS查询中的方括号<code>querySelectorAll</code>用于匹配属性。它选择<code>name</code>属性为的元素<code>&quot;color&quot;</code>。</p>
<h2 id="选择字段"><a href="#选择字段" class="headerlink" title="选择字段"></a>选择字段</h2><p>选择字段在概念上类似于单选按钮 - 它们还允许用户从一组选项中进行选择。但是，如果单选按钮将选项的布局置于我们的控制之下，则<code>&lt;select&gt;</code>标记的外观由浏览器确定。</p>
<p>选择字段也有一个更类似于复选框列表的变体，而不是单选框。给定<code>multiple</code>属性时，<code>&lt;select&gt;</code>标签将允许用户选择任意数量的选项，而不仅仅是一个选项。在大多数浏览器中，这将显示为与普通选择字段不同，正常选择字段通常被绘制为仅在打开时显示选项<em>的下拉</em>控件。</p>
<p>每个<code>&lt;option&gt;</code>标签都有一个值。可以使用<code>value</code>属性定义此值。如果没有给出，则选项内的文本将计为其值。元素的<code>value</code>属性<code>&lt;select&gt;</code>反映当前选定的选项。<code>multiple</code>但是，对于某个字段，此属性并不重要，因为它只给出当前所选选项<em>之一</em>的值。</p>
<p>的<code>&lt;option&gt;</code>用于标记<code>&lt;select&gt;</code>字段可以通过该领域的类似阵列的对象来访问<code>options</code>属性。每个选项都有一个名为的属性<code>selected</code>，用于指示当前是否选择了该选项。也可以编写该属性以选择或取消选择选项。</p>
<p>此示例从<code>multiple</code>选择字段中提取所选值，并使用它们从各个位组成二进制数。按住控件（或Mac上的命令）以选择多个选项。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">select</span>  <span class="attr">multiple</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">option</span>  <span class="attr">value</span> = <span class="string">“1”</span> &gt;</span> 0001 <span class="tag">&lt;/ <span class="attr">option</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">option</span>  <span class="attr">value</span> = <span class="string">“2”</span> &gt;</span> 0010 <span class="tag">&lt;/ <span class="attr">option</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">option</span>  <span class="attr">value</span> = <span class="string">“4”</span> &gt;</span> 0100 <span class="tag">&lt;/ <span class="attr">option</span> &gt;</span> </span><br><span class="line">  <span class="tag">&lt; <span class="attr">option</span>  <span class="attr">value</span> = <span class="string">“8”</span> &gt;</span> 1000 <span class="tag">&lt;/ <span class="attr">option</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt;/ <span class="attr">select</span> &gt;</span> = <span class="tag">&lt;<span class="name">span</span>  <span class="attr">id</span> = <span class="string">“output”</span>&gt;</span> 0 <span class="tag">&lt;/ <span class="attr">span</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span><br><span class="line">  let  select  =  document。querySelector（“select”）;</span><br><span class="line">  让 output  =  document。querySelector（“＃output”）;</span><br><span class="line">  选择。的addEventListener（“改变”，（）=&gt; &#123;</span><br><span class="line">     让 数 =  0 ;</span><br><span class="line">     对于（让 选项 的 阵列。从（选择。选项））&#123;</span><br><span class="line">       如果（选项。选择）&#123;</span><br><span class="line">         号 + =  编号（选项。值）;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    输出。textContent  =  number ;</span><br><span class="line">  &#125;）;</span><br><span class="line"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<h2 id="文件字段"><a href="#文件字段" class="headerlink" title="文件字段"></a>文件字段</h2><p>文件字段最初设计为通过表单从用户机器上传文件的方式。在现代浏览器中，它们还提供了一种从JavaScript程序中读取此类文件的方法。该领域是一种看门人。该脚本不能简单地从用户的计算机开始读取私有文件，但如果用户在这样的字段中选择文件，则浏览器会将该操作解释为该脚本可能读取该文件。</p>
<p>文件字段通常看起来像标有“选择文件”或“浏览”之类的按钮，其中包含有关所选文件旁边的信息。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“file”</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span><br><span class="line">  let  input  =  document。querySelector（“input”）;</span><br><span class="line">  输入。的addEventListener（“改变”，（）=&gt; &#123;</span><br><span class="line">     如果（输入。文件。长度 &gt;  0）&#123;</span><br><span class="line">       让 文件 =  输入。文件 [ 0 ];</span><br><span class="line">       控制台。日志（“您选择”，文件。名字）;</span><br><span class="line">      if（文件。类型）控制台。log（“它有类型”，文件。类型）;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;）;</span><br><span class="line"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p><code>files</code>文件字段元素的属性是包含在字段中选择的文件的类数组对象（同样，不是真实数组）。它最初是空的。不仅仅是<code>file</code>属性的原因是文件字段也支持<code>multiple</code>属性，这使得可以同时选择多个文件。</p>
<p>对象中的<code>files</code>对象具有诸如<code>name</code>（文件名），<code>size</code>（文件的大小，以字节为单位，其为8位的块）以及<code>type</code>（文件的媒体类型，例如<code>text/plain</code>或<code>image/jpeg</code>）之类的属性。</p>
<p>它没有的是包含文件内容的属性。实现这一点需要更多参与。由于从磁盘读取文件可能需要一些时间，因此接口必须是异步的，以避免冻结文档。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt; <span class="attr">input</span>  <span class="attr">type</span> = <span class="string">“file”</span>  <span class="attr">multiple</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span><br><span class="line">  let  input  =  document。querySelector（“input”）;</span><br><span class="line">  输入。的addEventListener（“改变”，（）=&gt; &#123;</span><br><span class="line">     对于（让 文件 的 阵列。从（输入。文件））&#123;</span><br><span class="line">       让 读者 =  新 的FileReader（）;</span><br><span class="line">       读取器。的addEventListener（“负载”，（）=&gt; &#123;</span><br><span class="line">         控制台。日志（“文件”，文件。名，“开始与”，</span><br><span class="line">                     阅读器。结果。切片（0，20））;</span><br><span class="line">      &#125;）;</span><br><span class="line">      读者。readAsText（file）;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;）;</span><br><span class="line"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span><br></pre></td></tr></table></figure></div>
<p>读取文件是通过创建一个<code>FileReader</code>对象，<code>&quot;load&quot;</code>为它注册一个事件处理程序，并调用它的<code>readAsText</code>方法，为它提供我们想要读取的文件来完成的。加载完成后，读者的<code>result</code>属性包含文件的内容。</p>
<p><code>FileReader`</code>“error”<code>当读取文件因任何原因失败时，s也会触发事件。错误对象本身将最终出现在读者的</code>error`属性中。这个界面是在承诺成为语言的一部分之前设计的。你可以将它包装在这样的承诺中：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">功能 readFileText（文件）&#123;</span><br><span class="line">   返回 新 无极（（决心，拒绝）=&gt; &#123;</span><br><span class="line">     让 读者 =  新 的FileReader（）;</span><br><span class="line">     读取器。的addEventListener（</span><br><span class="line">       “负载”，（）=&gt;  解析（读取器。结果））;</span><br><span class="line">     读取器。的addEventListener（</span><br><span class="line">       “error”，（）=&gt;  拒绝（读者。错误））;</span><br><span class="line">    读者。readAsText（file）;</span><br><span class="line">  &#125;）;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h2 id="存储数据客户端"><a href="#存储数据客户端" class="headerlink" title="存储数据客户端"></a>存储数据客户端</h2><p>带有一点JavaScript的简单HTML页面可以成为“迷你应用程序”的一种很好的格式 - 小型辅助程序可以自动执行基本任务。通过将几个表单字段与事件处理程序连接起来，您可以执行任何操作，从厘米和英寸之间的转换到从主密码和网站名称计算密码。</p>
<p>当这样的应用程序需要在会话之间记住某些内容时，您无法使用JavaScript绑定 - 每次关闭页面时都会丢弃这些绑定。您可以设置服务器，将其连接到Internet，并让应用程序存储在那里。我们将在<a href="http://eloquentjavascript.net/20_node.html" target="_blank" rel="noopener">第20章中</a>看到如何做到这一点。但这是一项额外的工作和复杂性。有时仅将数据保留在浏览器中就足够了。</p>
<p>该<code>localStorage</code>对象可用于以页面重新加载的方式存储数据。此对象允许您在名称下归档字符串值。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">localStorage。setItem（“username”，“marijn”）;</span><br><span class="line">控制台。日志（localStorage的。的getItem（“用户名”））;</span><br><span class="line"><span class="comment">//→marijn </span></span><br><span class="line">localStorage。removeItem（“username”）;</span><br></pre></td></tr></table></figure></div>
<p>一个值<code>localStorage</code>会被覆盖，直到被覆盖，它被删除<code>removeItem</code>，或者用户清除其本地数据。</p>
<p>来自不同域的站点获得不同的存储隔间。这意味着<code>localStorage</code>由给定网站存储的数据原则上只能由同一站点上的脚本读取（和覆盖）。</p>
<p>浏览器会对网站可以存储的数据大小施加限制<code>localStorage</code>。这种限制，以及用垃圾填满人们硬盘的事实并没有真正有利可图，阻止了这个功能占用太多空间。</p>
<p>以下代码实现了一个粗略的笔记记录应用程序。它保留一组命名注释，并允许用户编辑注释并创建新注释。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">注意：&lt; 选择&gt; <span class="xml"><span class="tag">&lt;/ 选择&gt;</span>  <span class="tag">&lt; 按钮&gt;</span>添加<span class="tag">&lt;/ 按钮&gt;</span> <span class="tag">&lt; <span class="attr">BR</span> &gt;</span> </span></span><br><span class="line"><span class="xml"><span class="tag">&lt; <span class="attr">textarea</span>的 风格 = <span class="string">“宽度：100％”</span> &gt;</span> <span class="tag">&lt;/ <span class="attr">textarea</span>的&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span></span><br><span class="line"><span class="xml">  let  list  =  document。querySelector（“select”）;</span></span><br><span class="line"><span class="xml">  让我们 注意 =  文件。querySelector（“textarea”）;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  让 国家 ;</span></span><br><span class="line"><span class="xml">  function  setState（newState）&#123;</span></span><br><span class="line"><span class="xml">     list。textContent  =  “” ;</span></span><br><span class="line"><span class="xml">    对于（让 名 的 对象。键（newState。笔记））&#123;</span></span><br><span class="line"><span class="xml">       让 选项 =  文件。createElement（“option”）;</span></span><br><span class="line"><span class="xml">      选项。textContent  =  name ;</span></span><br><span class="line"><span class="xml">      如果（newState。选择 == 名称）选项。selected  =  true ;</span></span><br><span class="line"><span class="xml">      清单。appendChild（选项）;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    请注意。value  =  newState。笔记 [ newState。选中 ];</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    localStorage。setItem（“注释”，JSON。字符串化（newState））;</span></span><br><span class="line"><span class="xml">    state  =  newState ;</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">  的setState（JSON。解析（localStorage的。的getItem（“票据”））| | &#123;</span></span><br><span class="line"><span class="xml">     笔记：&#123; “购物清单”：“胡萝卜\ nRaisins” &#125;，</span></span><br><span class="line"><span class="xml">     选择：“购物清单”</span></span><br><span class="line"><span class="xml">  &#125;）;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  清单。的addEventListener（“改变”，（）=&gt; &#123;</span></span><br><span class="line"><span class="xml">     的setState（&#123; 笔记：状态。笔记，选择：列表。值 &#125;）;</span></span><br><span class="line"><span class="xml">  &#125;）;</span></span><br><span class="line"><span class="xml">  请注意。的addEventListener（“改变”，（）=&gt; &#123;</span></span><br><span class="line"><span class="xml">     的setState（&#123;</span></span><br><span class="line"><span class="xml">       笔记：对象。分配（&#123;&#125;，状态。笔记，</span></span><br><span class="line"><span class="xml">                           &#123;[ 州。选中 ]：注意。value &#125;），</span></span><br><span class="line"><span class="xml">       selected：state。选</span></span><br><span class="line"><span class="xml">    &#125;）;</span></span><br><span class="line"><span class="xml">  &#125;）;</span></span><br><span class="line"><span class="xml">  文件。querySelector（“按钮”）</span></span><br><span class="line"><span class="xml">    。的addEventListener（“点击”，（）=&gt; &#123;</span></span><br><span class="line"><span class="xml">       让 名 =  提示（“注名”）;</span></span><br><span class="line"><span class="xml">       如果（名称）的setState（&#123;</span></span><br><span class="line"><span class="xml">         笔记：对象。assign（&#123;&#125;，状态。笔记，&#123;[ 名称 ]： “” &#125; ），</span></span><br><span class="line"><span class="xml">         选中：名称</span></span><br><span class="line"><span class="xml">      &#125;）;</span></span><br><span class="line"><span class="xml">    &#125;）;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span></span><br></pre></td></tr></table></figure></div>
<p>脚本从<code>&quot;Notes&quot;</code>存储的值中获取其起始状态，<code>localStorage</code>或者，如果缺少该脚本，则创建一个仅包含购物清单的示例状态。读取不存在的字段<code>localStorage</code>将产生<code>null</code>。传递<code>null</code>给<code>JSON.parse</code>将使其解析字符串<code>&quot;null&quot;</code>并返回<code>null</code>。因此，<code>||</code>操作员可以用于在这种情况下提供默认值。</p>
<p>该<code>setState</code>方法确保DOM显示给定状态并将新状态存储到<code>localStorage</code>。事件处理程序调用此函数以移至新状态。</p>
<p><code>Object.assign</code>示例中的用法旨在创建一个新对象，该对象是旧对象的克隆<code>state.notes</code>，但添加或覆盖了一个属性。<code>Object.assign</code>获取它的第一个参数并将任何进一步参数的所有属性添加到它。因此，给它一个空对象将使它填充一个新的对象。第三个参数中的方括号表示法用于创建名称基于某个动态值的属性。</p>
<p>还有另一个对象，类似于<code>localStorage</code>，被称为<code>sessionStorage</code>。两者之间的区别在于<code>sessionStorage</code>每个<em>会话</em>结束时忘记了内容，对于大多数浏览器来说，这意味着每当浏览器关闭时。</p>
<h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>在本章中，我们讨论了HTTP协议的工作原理。甲<em>客户</em>发送一个请求，其中包含的方法（通常<code>GET</code>）和标识资源的路径。然后，<em>服务器</em>决定如何处理请求，并使用状态代码和响应正文进行响应。请求和响应都可能包含提供其他信息的标头。</p>
<p>调用浏览器JavaScript可以发出HTTP请求的接口<code>fetch</code>。发出请求看起来像这样：</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fetch（“/ 18_http.html”）。然后（[R  =&gt;  [R 。文本（））。然后（文本 =&gt; &#123;</span><br><span class="line">   控制台。日志（`的页面开始以$ &#123; 文本。切片（0，15）&#125; `）;</span><br><span class="line">&#125;）;</span><br></pre></td></tr></table></figure></div>
<p>浏览器<code>GET</code>请求获取显示网页所需的资源。页面还可以包含表单，这些表单允许用户输入的信息在提交表单时作为对新页面的请求发送。</p>
<p>HTML可以表示各种类型的表单字段，例如文本字段，复选框，多选字段和文件选择器。</p>
<p>可以使用JavaScript检查和操作这些字段。它们<code>&quot;change&quot;</code>在更改时触发<code>&quot;input&quot;</code>事件，在键入文本时触发事件，并在键盘焦点时接收键盘事件。类似<code>value</code>（对于文本和选择字段）或<code>checked</code>（对于复选框和单选按钮）的属性用于读取或设置字段的内容。</p>
<p>提交表单时，<code>&quot;submit&quot;</code>会触发一个事件。JavaScript处理程序可以调用<code>preventDefault</code>该事件来禁用浏览器的默认行为。表单字段元素也可以出现在表单标记之外。</p>
<p>当用户在文件选择器字段中从其本地文件系统中选择文件时，该<code>FileReader</code>接口可用于从JavaScript程序访问该文件的内容。</p>
<p>该<code>localStorage</code>和<code>sessionStorage</code>对象可用于保存信息在生存页面重载的方法。第一个对象永远保存数据（或直到用户决定清除它），第二个对象保存它直到浏览器关闭。</p>
<h2 id="演习"><a href="#演习" class="headerlink" title="演习"></a>演习</h2><h3 id="内容协商"><a href="#内容协商" class="headerlink" title="内容协商"></a>内容协商</h3><p>HTTP可以做的一件事就是称为<em>内容协商</em>。该<code>Accept</code>请求头用来告诉什么类型的文件的客户希望得到的服务器。许多服务器忽略此标头，但是当服务器知道对资源进行编码的各种方法时，它可以查看此标头并发送客户端更喜欢的标头。</p>
<p>URL <a href="https://eloquentjavascript.net/author" target="_blank" rel="noopener"><em>https://eloquentjavascript.net/author</em></a>配置为使用明文，HTML或JSON进行响应，具体取决于客户端要求的内容。这些格式是由标准确定<em>的媒体类型</em><code>text/plain</code>，<code>text/html</code>和<code>application/json</code>。</p>
<p>发送请求以获取此资源的所有三种格式。使用<code>headers</code>传递给的选项对象中的属性<code>fetch</code>将名称标题设置为<code>Accept</code>所需的媒体类型。</p>
<p>最后，尝试询问媒体类型并查看生成的状态代码。<code>application/rainbows+unicorns</code></p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//你的代码在这里</span><br></pre></td></tr></table></figure></div>
<h3 id="一个JavaScript工作台"><a href="#一个JavaScript工作台" class="headerlink" title="一个JavaScript工作台"></a>一个JavaScript工作台</h3><p>构建一个允许人们键入和运行JavaScript代码片段的界面。</p>
<p>在一个<code>&lt;textarea&gt;</code>字段旁边放一个按钮，当按下该按钮时，使用<code>Function</code>我们在<a href="http://eloquentjavascript.net/10_modules.html#eval" target="_blank" rel="noopener">第10章中</a>看到的构造函数将文本包装在函数中并调用它。将函数的返回值或其引发的任何错误转换为字符串，并将其显示在文本字段下方。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="JAVASCRIPT"><figure class="iseeu highlight /javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt; textarea  id = “code” &gt;返回“hi”; <span class="xml"><span class="tag">&lt;/ <span class="attr">textarea</span> &gt;</span> </span></span><br><span class="line"><span class="xml"><span class="tag">&lt; <span class="attr">button</span>  <span class="attr">id</span> = <span class="string">“button”</span> &gt;</span>运行<span class="tag">&lt;/ <span class="attr">button</span> &gt;</span> </span></span><br><span class="line"><span class="xml"><span class="tag">&lt; <span class="attr">pre</span>  <span class="attr">id</span> = <span class="string">“output”</span> &gt;</span> <span class="tag">&lt;/ <span class="attr">pre</span> &gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt; <span class="attr">script</span> &gt;</span> </span></span><br><span class="line"><span class="xml">  //你的代码在这里。</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/ <span class="attr">script</span> &gt;</span></span></span><br></pre></td></tr></table></figure></div>
<h3 id="康威的生命游戏"><a href="#康威的生命游戏" class="headerlink" title="康威的生命游戏"></a>康威的生命游戏</h3><p>康威的生命游戏是一个简单的模拟，它在网格上创造了人工“生命”，每个细胞都是活着的。每一代（转），应用以下规则：</p>
<ul>
<li>任何少于两个或三个以上活邻居的活细胞都会死亡。</li>
<li>任何有两三个活邻居的活细胞都会留在下一代。</li>
<li>任何具有三个活邻居的死细胞都成为活细胞。</li>
</ul>
<p>甲<em>邻居</em>被定义为任何的相邻小区，包括对角地相邻的。</p>
<p>请注意，这些规则一次应用于整个网格，而不是一次应用于一个方格。这意味着邻居的计数基于生成开始时的情况，并且在该生成期间发生到邻居小区的变化不应该影响给定小区的新状态。</p>
<p>使用您认为合适的数据结构实现此游戏。用于<code>Math.random</code>最初使用随机模式填充网格。将其显示为复选框字段的网格，旁边有一个按钮以前进到下一代。当用户选中或取消选中复选框时，应在计算下一代时包含其更改。</p>
<div class="highlight-box" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true" data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt; div  id = “grid” &gt; &lt;/ div &gt; </span><br><span class="line">&lt; button  id = “next” &gt;下一代&lt;/ button &gt;</span><br><span class="line"></span><br><span class="line">&lt; script &gt; </span><br><span class="line">  //你的代码在这里。</span><br><span class="line">&lt;/ script &gt;</span><br></pre></td></tr></table></figure></div>
<p>[</p>

      
    </div>
    
  </div>
  
  
</article>

  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
  </nav>


</section>
        <aside id="sidebar">
  
    <div class="widget-box">
  <div class="avatar-box">
    <img class="avatar" src="/images/default-avatar.jpeg" title="图片来自网络">
    <h3 class="avatar-name">
      
        半城狂沙
      
    </h3>
    <p class="avatar-slogan">
      来自一个特别菜鸡的小前端的小小博客
    </p>
  </div>
</div>


  
    

  
    

  
    
  
    
  <div class="widget-box">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li></ul>
    </div>
  </div>

  
    
  <div class="widget-box">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/05/26/post和get的区别/">GET和post的区别</a>
          </li>
        
          <li>
            <a href="/2019/05/26/ajax/">AJAX</a>
          </li>
        
          <li>
            <a href="/2019/05/26/关于http的文章/">http协议</a>
          </li>
        
          <li>
            <a href="/2019/05/23/九个常见的css问题技巧/">九个常见的css技巧</a>
          </li>
        
          <li>
            <a href="/2019/04/10/DOM-相关/">DOM 相关</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      </div>
      <footer id="footer">
  <div class="foot-box global-width">
    &copy; 2019 bundy &nbsp;&nbsp;
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    &nbsp;|&nbsp;主题 <a href="https://github.com/yiluyanxia/hexo-theme-antiquity">antiquity</a>
    <br>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container_site_pv">阁下是第<span id="busuanzi_value_site_pv"></span>个访客</span>
  </div>
</footer>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script src="/js/jquery-2.0.3.min.js"></script>

  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



    </div>
    <nav id="mobile-nav" class="mobile-nav-box">
  <div class="mobile-nav-img mobile-nav-top"></div>
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
  <div class="mobile-nav-img  mobile-nav-bottom"></div>
</nav>    
  </div>
</body>
</html>